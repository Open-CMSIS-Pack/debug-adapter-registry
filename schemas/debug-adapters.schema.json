{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/Open-CMSIS-Pack/debug-adapter-registry/v2.11.0/schemas/debug-adapters.schema.json",
  "title": "CMSIS debug-adapters registry",
  "description": "Contains the list of supported debug adapters",
  "version": "2.11.0",
  "type": "object",
  "properties": {
    "debug-adapters": {
      "$ref": "#/definitions/DebugAdaptersDescType"
    }
  },
  "additionalProperties": false,
  "required": [ "debug-adapters" ],
  "definitions": {
    "DebugAdaptersDescType": {
      "title": "debug-adapters:\nDocumentation: https://open-cmsis-pack.github.io/cmsis-toolbox/build-operation/#debug-adapter-integration",
      "description": "Contains the list of supported debug adapters.",
      "type": "array",
      "uniqueItems": true,
      "items": { "$ref": "#/definitions/DebugAdapterDescType" }
    },
    "DebugAdapterDescType": {
      "type": "object",
      "properties": {
        "name":       { "type": "string", "description": "Debugger adapter name." },
        "alias-name": { "type": "array",  "items": { "type": "string"}, "description": "List of names (in input node or BSP) that map to this debug adapter." },
        "template":   { "type": "string", "description": "Used only by the VS Code CMSIS Solution extension for configuration." },
        "gdbserver":  { "type": "null", "description": "Add the gdbserver: node in the cbuild-run.yml file." },
        "defaults":   { "$ref": "#/definitions/DebugAdaptersDefaultsType" },
        "capabilities":   { "$ref": "#/definitions/DebugAdaptersCapabilitiesType" }
      },
      "additionalProperties": false,
      "required": ["name"]
    },
    "DebugAdaptersDefaultsType": {
      "description": "List of default options to use when not specified in the target-set: node.",
      "type": "object",
      "properties": {
        "port":     { "type": "number", "description": "Port number." },
        "protocol": { "enum": [ "jtag", "swd" ], "description": "Selected debug protocol (jtag or swd)." },
        "clock":    { "type": "number", "description": "Selected debug clock speed (in Hz)." }
      },
      "additionalProperties": true
    },
    "DebugAdaptersCapabilitiesType": {
      "capabilities": {
        "clock": {
          "title": { "type": "string", "description": "Clock" },
          "type": { "enum": [ "clock" ] },
          "description": { "type": "string", "description": "debug clock in Hz" }
        },
        "protocol": {
          "title": { "type": "string", "description": "Protocol" },
          "type": { "type": "string" },
          "values": { "enum": [ "jtag", "swd" ] },
          "description": { "type": "string", "description": "debug protocol" }
        },
        "trace": {
          "title": { "type": "string", "description": "Trace" },
          "type": { "type": "string" },
          "trace-port": {
            "type": { "type": "string" },
            "values": { "enum": ["SWO-UART", "SWO-Manchester", "TP1", "TP2", "TP4"]},
            "description": { "type": "string", "description": "trace port" }
          },
          "trace-clock": {
            "type": { "type": "string" },
            "description": { "type": "string", "description": "trace clock in Hz" }
          }
        },
        "telnet": {
          "title": { "type": "string", "description": "Telnet" },
          "type": { "type": "string" },
          "max-cnt": {
            "type": { "type": "string" },
            "description": { "type": "string", "description": "maximum number of telnet clients" }
          },
          "mode": {
            "type": { "type": "string" },
            "values": { "enum": ["UART", "ITM", "semihosting", "EventRecorder", "RTT"] },
            "description": { "type": "string", "description": "telnet connection mode" }
          },
          "pname": {
            "type": { "type": "string" },
            "description": { "type": "string", "description": "one of the available processor names" }
          }
        }
      }
    }
  }
}
