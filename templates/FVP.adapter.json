{
    "tasks": [{
        "label": "CMSIS Load+Run",
        "type": "shell",
        "command": "<% if (model === 'Other') { %><%= other_model %><% } else { %><%= model %><% } %>",
        "options": { "cwd": "${workspaceFolder}/<%= solution_folder %>" },
        "windows": {
            "options": {
                "shell": {
                    "executable": "cmd.exe",
                    "args": [ "/d", "/c" ]
                }
            }
        },
        "linux": {
            "options": {
                "shell": {
                    "executable": "/bin/bash",
                    "args": [ "-c" ]
                }
            }
        },
        "osx": {
            "options": {
                "shell": {
                    "executable": "/bin/bash",
                    "args": [ "-c" ]
                }
            }
        },
        "args": [
            "<% if (conf_file) { %>",
            "-f", "<%= conf_file %>\n",
            "<% } %>",
            "<% if (simlimit) { %>",
            "--simlimit", "<%= simlimit %>\n",
            "<% } %>",
            "<% if (Array.isArray(args)) { %>",
            "<% for (const arg of args) { %>",
            "<%= arg %>",
            "<% } %>,"
            "<% } else if (typeof args === 'string' && args.trim().length > 0) { %>",
            "<% for (const arg of args.trim().split(/\s+/)) { %>",
            "<%= arg %>",
            "<% } %>",
            "<% } %>",
            "<% for (const image of symbol_files) { %>",
            "-a", "<%= image.file %>",
            "<% } %>"
        ],
        "problemMatcher": []
    }]
}
